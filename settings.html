<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      padding: 16px;
      margin: 0;
    }
    h3 {
      margin-top: 0;
      color: #172b4d;
      font-size: 16px;
    }
    p {
      color: #5e6c84;
      font-size: 14px;
      line-height: 1.5;
    }
    .info {
      background: #f4f5f7;
      padding: 12px;
      border-radius: 3px;
      margin-top: 12px;
    }
    .info-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: #172b4d;
    }
  </style>
</head>
<body>
  <h3>Card Estimates Power-Up</h3>
  <p>This Power-Up allows you to:</p>
  <div class="info">
    <div class="info-title">ðŸ“Š Set estimates on cards</div>
    Click on any card badge or detail badge to set a numeric estimate
  </div>
  <div class="info">
    <div class="info-title">ðŸ”¢ View column totals</div>
    Click "Show Estimate Total" in the list menu to see the sum of all estimates
  </div>

  <script>
    // Load Trello library with fallback
    (function() {
      var script = document.createElement('script');
      script.src = 'https://p.trellocdn.com/power-up.min.js';
      script.onerror = function() {
        console.log('CDN failed, loading local library...');
        var fallback = document.createElement('script');
        fallback.src = './power-up.min.js';
        fallback.onload = initPopup;
        document.head.appendChild(fallback);
      };
      script.onload = initPopup;
      document.head.appendChild(script);
    })();

    function initPopup() {
      setTimeout(function() {
        if (typeof TrelloPowerUp !== 'undefined') {
          var t = TrelloPowerUp.iframe();
          // Settings page doesn't need to do anything special
          console.log('Settings page loaded');
        }
      }, 100);
    }
  </script>
</body>
</html>
